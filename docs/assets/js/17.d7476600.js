(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{112:function(a,s,e){a.exports=e.p+"assets/img/image-20190715085036593.ab4a32ff.png"},113:function(a,s,e){a.exports=e.p+"assets/img/image2019-07-15_09.01.21.1ac5bd70.png"},332:function(a,s,e){a.exports=e.p+"assets/img/image-20190726144001775.edc163c8.png"},333:function(a,s,e){a.exports=e.p+"assets/img/image-20190715101542756.5934c00e.png"},334:function(a,s,e){a.exports=e.p+"assets/img/image-20190715193838012.eca23618.png"},356:function(a,s,e){"use strict";e.r(s);var t=e(0),r=Object(t.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"å®‰è£…-kubernetes-å•masterèŠ‚ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…-kubernetes-å•masterèŠ‚ç‚¹","aria-hidden":"true"}},[a._v("#")]),a._v(" å®‰è£… Kubernetes å•MasterèŠ‚ç‚¹")]),a._v(" "),t("p",[a._v("å¦‚æœæ‚¨æƒ³æ‹¥æœ‰ä¸€ä¸ªä¾›ä¸ªäººå­¦ä¹ æµ‹è¯•ä½¿ç”¨çš„ kubernetes é›†ç¾¤ï¼Œæ¨èçš„åšæ³•æ˜¯åœ¨é˜¿é‡Œäº‘é‡‡è´­å¦‚ä¸‹é…ç½®ï¼š")]),a._v(" "),t("ul",[t("li",[a._v("3å° 2æ ¸4G çš„ECSï¼ˆçªå‘æ€§èƒ½å®ä¾‹ t5 ecs.t5-c1m2.largeï¼Œæˆ–åŒç­‰é…ç½®ï¼‰")]),a._v(" "),t("li",[a._v("Cent OS 7.6")])]),a._v(" "),t("p",[a._v("Kuboard çš„ Live Demo ç¯å¢ƒä½¿ç”¨çš„æ˜¯å¦‚ä¸‹æ‹“æ‰‘ç»“æ„ï¼Œæœ¬æ–‡æ¡£æè¿°äº†å¦‚ä½•åœ¨å®Œæˆè¯¥ demo ç¯å¢ƒçš„æ­å»ºã€‚ï¼ˆåœ¨é˜¿é‡Œäº‘ä¸Šï¼Œæ‹¥æœ‰ä¸€ä¸ª3èŠ‚ç‚¹ Kubernetes é›†ç¾¤ï¼Œæ¯å¤©çš„æˆæœ¬ä¸è¶…è¿‡12å…ƒï¼Œä¸”ï¼ŒåœæœºçŠ¶æ€ä¸‹ä¸æ”¶è´¹ï¼Œéå¸¸é€‚åˆäºæŠ€æœ¯çˆ±å¥½è€…å­¦ä¹ æ—¶ä½¿ç”¨ã€‚ï¼‰")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=obezo3pg",target:"_blank",rel:"noopener noreferrer"}},[a._v("é¢†å–é˜¿é‡Œäº‘æœ€é«˜2000å…ƒçº¢åŒ…"),t("OutboundLink")],1)]),a._v(" "),t("p",[t("a",{attrs:{href:"http://demo.eip.work/#/login?isReadOnly=true&token=eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJrdWJvYXJkLXZpZXdlci10b2tlbi02djZiZiIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJrdWJvYXJkLXZpZXdlciIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjhiYTU3YmI1LWFiMTctNDM1NS1hNTM0LTQ0Njk4NGY0NzFlZiIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTprdWJvYXJkLXZpZXdlciJ9.DcXNIp0RKha1zkV4ga_QlGfcvMLGx2LOyzX-0VeboC3FojKFhxnfBeoda-zTeh6ugJlSM4kQYrRcof1Kx8Mg3-UgofNmgRySbDEVKtJZyMUoHqLmySKUIn8sbX8q83RNcqwcvY-fM8-w8HSuzU7Td7WWNuZrlCL4q_LQDYIBet1nlQ83YsENKNE8rsZQFDw8YM0MH6BEZLdwyhaboy_jjYbsU7kv8gks3aIX4lh1Fs9ZFQpC_6B0_MZvb7rEeG2M8QWXoUkDoL5JCKu6Wot5GlWf0kDMxIsViggP0NmSDTKh6kIvCkT2FZ2I4guEcjE_EjBpdOS6Abta22tzLlPKhg",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kuboard Live Demo"),t("OutboundLink")],1),a._v("\nä¸ºä¿è¯ç¯å¢ƒçš„ç¨³å®šæ€§ï¼ŒLive Demo ä¸­åªæä¾›åªè¯»æƒé™ã€‚"),t("span",{staticStyle:{color:"#F56C6C","font-weight":"500"}},[a._v("ï¼ˆè¯·åœ¨PCæµè§ˆå™¨ä¸­æ‰“å¼€ï¼‰")])]),a._v(" "),t("p",[t("img",{attrs:{src:e(332),alt:"image-20190726144001775"}})]),a._v(" "),t("h2",{attrs:{id:"åˆ¶ä½œæ ‡å‡†æœºé•œåƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ¶ä½œæ ‡å‡†æœºé•œåƒ","aria-hidden":"true"}},[a._v("#")]),a._v(" åˆ¶ä½œæ ‡å‡†æœºé•œåƒ")]),a._v(" "),t("p",[a._v("é€šè¿‡ä½¿ç”¨æ ‡å‡†æœºé•œåƒï¼Œå¯ä»¥")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("é¿å…é‡å¤æ‰§è¡Œå¯¹æµ‹è¯•æœºå®‰è£…å¿…è¦è½¯ä»¶çš„è¿‡ç¨‹")])]),a._v(" "),t("li",[t("strong",[a._v("ä»¥ä¸€ç§ç›¸å¯¹æ ‡å‡†åŒ–çš„è¿‡ç¨‹ç®¡ç†æµ‹è¯•æœºçš„ç»´æŠ¤")])])]),a._v(" "),t("p",[a._v("æ ‡å‡†æœºé•œåƒä¸­é¢„è£…äº†å¦‚ä¸‹å†…å®¹ï¼š")]),a._v(" "),t("ul",[t("li",[a._v("docker")]),a._v(" "),t("li",[a._v("gitlab-runner")]),a._v(" "),t("li",[a._v("kubernetes images")])]),a._v(" "),t("div",{staticClass:"tip custom-block"},[t("ul",[t("li",[a._v("æ‚¨ä¹Ÿå¯ä»¥ä¸åˆ¶ä½œæ ‡å‡†æœºé•œåƒï¼Œè€Œæ˜¯åœ¨ä¸‰å°æœºå™¨ä¸Šéƒ½æ‰§è¡Œ "),t("em",[t("strong",[a._v("åˆ¶ä½œæ ‡å‡†æœºé•œåƒ")])]),a._v(" ä¸­çš„æ‰€æœ‰æ“ä½œæ­¥éª¤")])])]),a._v(" "),t("p",[t("strong",[a._v("æ ‡å‡†æœºé•œåƒçš„åˆ¶ä½œè¿‡ç¨‹æè¿°å¦‚ä¸‹ï¼š")])]),a._v(" "),t("h3",{attrs:{id:"å®‰è£…docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…docker","aria-hidden":"true"}},[a._v("#")]),a._v(" å®‰è£…docker")]),a._v(" "),t("p",[t("strong",[a._v("å¸è½½æ—§ç‰ˆæœ¬")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum remove docker "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tdocker-client "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tdocker-client-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tdocker-common "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tdocker-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tdocker-latest-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tdocker-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tdocker-selinux "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tdocker-engine-selinux "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tdocker-engine\n")])])]),t("p",[t("strong",[a._v("ä¸‹è½½ä¾èµ–åŒ…åŠå®‰è£…åŒ…")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://download.docker.com/linux/centos/7/x86_64/stable/Packages/docker-ce-cli-18.09.7-3.el7.x86_64.rpm\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://download.docker.com/linux/centos/7/x86_64/stable/Packages/docker-ce-18.09.7-3.el7.x86_64.rpm\n")])])]),t("p",[t("strong",[a._v("å®‰è£…")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y containerd.io-1.2.6-3.3.el7.x86_64.rpm\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y docker-ce-cli-18.09.7-3.el7.x86_64.rpm\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y docker-ce-18.09.7-3.el7.x86_64.rpm\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" docker\n")])])]),t("p",[t("strong",[a._v("å¯åŠ¨ docker æœåŠ¡")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl start docker\n")])])]),t("p",[t("strong",[a._v("æ£€æŸ¥ docker ç‰ˆæœ¬")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker version\n")])])]),t("blockquote",[t("p",[t("strong",[a._v("å‚è€ƒæ–‡æ¡£")])]),a._v(" "),t("p",[a._v("https://docs.docker.com/install/linux/docker-ce/centos/")]),a._v(" "),t("p",[a._v("https://docs.docker.com/install/linux/linux-postinstall/")])]),a._v(" "),t("h3",{attrs:{id:"å®‰è£…-nfs-utils"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…-nfs-utils","aria-hidden":"true"}},[a._v("#")]),a._v(" å®‰è£… nfs-utils")]),a._v(" "),t("p",[t("strong",[a._v("æ‰§è¡Œå®‰è£…å‘½ä»¤")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" nfs-utils\n")])])]),t("p",[a._v("å¿…é¡»å…ˆå®‰è£… nfs-utils æ‰èƒ½æŒ‚è½½ nfs ç½‘ç»œå­˜å‚¨")]),a._v(" "),t("h3",{attrs:{id:"k8såŸºæœ¬é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#k8såŸºæœ¬é…ç½®","aria-hidden":"true"}},[a._v("#")]),a._v(" K8SåŸºæœ¬é…ç½®")]),a._v(" "),t("p",[t("strong",[a._v("é…ç½®K8Sçš„yumæº")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<")]),a._v("EOF "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /etc/yum.repos.d/kubernetes.repo\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("kubernetes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Kubernetes\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("baseurl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("enabled")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("gpgcheck")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("repo_gpgcheck")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("gpgkey")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg\n        http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF\n")])])]),t("p",[t("strong",[a._v("å…³é—­swapã€é˜²ç«å¢™")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("swapoff -a\n")])])]),t("p",[t("strong",[a._v("å…³é—­SeLinux")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("setenforce "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])])]),t("p",[t("strong",[a._v("ä¿®æ”¹ /etc/sysctl.conf")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim /etc/sysctl.conf\n")])])]),t("p",[a._v("å‘å…¶ä¸­æ·»åŠ ")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("net.ipv4.ip_forward = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\n")])])]),t("p",[a._v("å¦‚ä¸‹å›¾æ‰€ç¤º")]),a._v(" "),t("p",[t("img",{attrs:{src:e(112),alt:"image-20190715085036593",title:":size=600x445"}})]),a._v(" "),t("p",[t("strong",[a._v("å®‰è£…kubeletã€kubeadmã€kubectl")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y kubelet-1.15.0 kubeadm-1.15.0 kubectl-1.15.0\n")])])]),t("p",[t("strong",[a._v("ä¿®æ”¹docker Cgroup Driverä¸ºsystemd")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim /usr/lib/systemd/system/docker.service\n")])])]),t("p",[a._v("å‘å…¶ä¸­ä»–æ·»åŠ ")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("--exec-opt native.cgroupdriver=systemd\n")])])]),t("p",[a._v("å¦‚ä¸‹å›¾æ‰€ç¤º")]),a._v(" "),t("p",[t("img",{attrs:{src:e(113),alt:"å±å¹•å¿«ç…§ 2019-07-15 09.01.21",title:":size=1000x326"}})]),a._v(" "),t("p",[a._v("é‡å¯ docker")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("systemctl daemon-reload\nsystemctl restart docker\n")])])]),t("p",[t("strong",[a._v("å¯åŠ¨kubelet")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" kubelet "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" systemctl start kubelet\n")])])]),t("p",[t("strong",[a._v("åŠ è½½ kubernetes é•œåƒ")])]),a._v(" "),t("p",[a._v("ç”±äºk8sæœåŠ¡ç›¸å…³é•œåƒåœ¨å›½å¤–é•œåƒæºï¼Œå›½å†…æ— æ³•è®¿é—®")]),a._v(" "),t("p",[a._v("æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ·»åŠ docker k8så›½å†…é•œåƒæº")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -sSL https://get.daocloud.io/daotools/set_mirror.sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" -s http://f1361db2.m.daocloud.io\n\nsystemctl restart docker\n")])])]),t("p",[t("strong",[a._v("æ‹‰å–k8sç›¸å…³é•œåƒ")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker pull mirrorgooglecontainers/kube-apiserver:v1.15.0\ndocker pull mirrorgooglecontainers/kube-controller-manager:v1.15.0\ndocker pull mirrorgooglecontainers/kube-scheduler:v1.15.0\ndocker pull mirrorgooglecontainers/kube-proxy:v1.15.0\ndocker pull mirrorgooglecontainers/pause:3.1\ndocker pull mirrorgooglecontainers/etcd:3.3.10\ndocker pull coredns/coredns:1.3.1\n")])])]),t("p",[t("strong",[a._v("æ›´æ”¹é•œåƒåä¸ºk8så®˜ç½‘é•œåƒ")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker tag d235b23c3570 k8s.gcr.io/kube-proxy:v1.15.0\ndocker tag 201c7a840312 k8s.gcr.io/kube-apiserver:v1.15.0\ndocker tag 2d3813851e87 k8s.gcr.io/kube-scheduler:v1.15.0\ndocker tag 8328bb49b652 k8s.gcr.io/kube-controller-manager:v1.15.0\ndocker tag da86e6ba6ca1 k8s.gcr.io/pause:3.1\ndocker tag eb516548c180 k8s.gcr.io/coredns:1.3.1\ndocker tag 2c4adeb21b4f k8s.gcr.io/etcd:3.3.10\n")])])]),t("p",[t("strong",[a._v("åˆ¶ä½œé•œåƒ")])]),a._v(" "),t("p",[a._v("è¯·å‚è€ƒé˜¿é‡Œäº‘åŸºäºECS "),t("a",{attrs:{href:"https://help.aliyun.com/document_detail/35109.html?spm=5176.2020520101.0.0.75fc4df5mtdFmV",target:"_blank",rel:"noopener noreferrer"}},[a._v("åˆ¶ä½œè™šæ‹Ÿæœºé•œåƒ"),t("OutboundLink")],1),a._v(" çš„æ–‡æ¡£")]),a._v(" "),t("h2",{attrs:{id:"åˆå§‹åŒ–-master-èŠ‚ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆå§‹åŒ–-master-èŠ‚ç‚¹","aria-hidden":"true"}},[a._v("#")]),a._v(" åˆå§‹åŒ– master èŠ‚ç‚¹")]),a._v(" "),t("h3",{attrs:{id:"åœ¨-demo-master-a-1-æœºå™¨ä¸Šæ‰§è¡Œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨-demo-master-a-1-æœºå™¨ä¸Šæ‰§è¡Œ","aria-hidden":"true"}},[a._v("#")]),a._v(" åœ¨ demo-master-a-1 æœºå™¨ä¸Šæ‰§è¡Œ")]),a._v(" "),t("p",[a._v("ä»¥ä¸‹å‘½ä»¤ä»¥ root èº«ä»½æ‰§è¡Œ")]),a._v(" "),t("p",[t("strong",[a._v("é…ç½® apiserver.demo çš„åŸŸå")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"x.x.x.x  apiserver.demo"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" /etc/hosts\n")])])]),t("div",{staticClass:"warning custom-block"},[t("p",[a._v("è¯·æ›¿æ¢å…¶ä¸­çš„ x.x.x.x ä¸ºæ‚¨çš„ demo-master-a-1 çš„å®é™… ip åœ°å€")])]),a._v(" "),t("p",[t("strong",[a._v("åˆ›å»º /root/k8s/kubeadm-config.yaml")])]),a._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" kubeadm.k8s.io/v1beta1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ClusterConfiguration\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kubernetesVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1.15.0\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("controlPlaneEndpoint")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"apiserver.demo:6443"')]),a._v("\n\n")])])]),t("p",[t("strong",[a._v("åˆå§‹åŒ– apiserver")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubeadm init --config"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("kubeadm-config.yaml --upload-certs\n")])])]),t("p",[a._v("æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),a._v(" "),t("p",[t("img",{attrs:{src:e(333),alt:"image-20190715101542756",title:":size=800x388"}})]),a._v(" "),t("p",[t("strong",[a._v("åˆå§‹åŒ– root ç”¨æˆ·çš„ kubectl é…ç½®")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -rf /root/.kube/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" /root/.kube/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -i /etc/kubernetes/admin.conf /root/.kube/config\n")])])]),t("p",[t("strong",[a._v("å®‰è£… calico")])]),a._v(" "),t("p",[a._v("ï¼ˆéœ€è¦åœ¨å®‰å…¨ç»„â€“ServerFarméœ€è¦ä¸ºé›†ç¾¤æœåŠ¡å™¨å™¨ç«¯å£6443å»ºç«‹å®‰å…¨ç»„è§„åˆ™ï¼‰")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl apply -f "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nhttps://docs.projectcalico.org/v3.6/getting-started/kubernetes/installation/hosted/kubernetes-datastore/calico-networking/1.7/calico.yaml\n")])])]),t("blockquote",[t("p",[a._v("å®‰è£…calicoï¼Œ è¯·å‚è€ƒhttps://docs.projectcalico.org/v3.6/getting-started/kubernetes/")])]),a._v(" "),t("p",[t("strong",[a._v("ç­‰å¾…calicoå®‰è£…å°±ç»ªï¼š")])]),a._v(" "),t("p",[a._v("æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œç­‰å¾…3-10åˆ†é’Ÿï¼Œç›´åˆ°æ‰€æœ‰çš„å®¹å™¨ç»„å¤„äº Running çŠ¶æ€")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" kubectl get pod -n kube-system\n")])])]),t("h3",{attrs:{id:"æ£€æŸ¥-apiserveråˆå§‹åŒ–ç»“æœ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ£€æŸ¥-apiserveråˆå§‹åŒ–ç»“æœ","aria-hidden":"true"}},[a._v("#")]),a._v(" æ£€æŸ¥ apiserveråˆå§‹åŒ–ç»“æœ")]),a._v(" "),t("p",[a._v("åœ¨ç¬¬ä¸€ä¸ªmasterèŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl get nodes\n")])])]),t("h2",{attrs:{id:"åˆå§‹åŒ–-workerèŠ‚ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆå§‹åŒ–-workerèŠ‚ç‚¹","aria-hidden":"true"}},[a._v("#")]),a._v(" åˆå§‹åŒ– workerèŠ‚ç‚¹")]),a._v(" "),t("h3",{attrs:{id:"è·å¾—-joinå‘½ä»¤å‚æ•°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è·å¾—-joinå‘½ä»¤å‚æ•°","aria-hidden":"true"}},[a._v("#")]),a._v(" è·å¾— joinå‘½ä»¤å‚æ•°")]),a._v(" "),t("p",[t("strong",[a._v("åœ¨ master èŠ‚ç‚¹ demo-master-a-1 èŠ‚ç‚¹æ‰§è¡Œ")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubeadm token create --print-join-command\n")])])]),t("p",[a._v("å¯è·å–kubeadm join å‘½ä»¤åŠå‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubeadm "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("join")]),a._v(" apiserver.demo:6443 --token mpfjma.4vjjg8flqihor4vt     --discovery-token-ca-cert-hash sha256:6f7a8e40a810323672de5eee6f4d19aa2dbdb38411845a1bf5dd63485c43d303\n")])])]),t("h3",{attrs:{id:"åˆå§‹åŒ–worker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆå§‹åŒ–worker","aria-hidden":"true"}},[a._v("#")]),a._v(" åˆå§‹åŒ–worker")]),a._v(" "),t("p",[t("strong",[a._v("é’ˆå¯¹æ‰€æœ‰çš„ worker èŠ‚ç‚¹æ‰§è¡Œ")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"x.x.x.x  apiserver.demo"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" /etc/hosts\nkubeadm "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("join")]),a._v(" apiserver.demo:6443 --token mpfjma.4vjjg8flqihor4vt     --discovery-token-ca-cert-hash sha256:6f7a8e40a810323672de5eee6f4d19aa2dbdb38411845a1bf5dd63485c43d303\n")])])]),t("div",{staticClass:"tip custom-block"},[t("ul",[t("li",[a._v("å°† x.x.x.x æ›¿æ¢ä¸º demo-master-a-1 çš„å®é™… ip")]),a._v(" "),t("li",[a._v("å°† kubeadm join å‘½ä»¤åçš„å‚æ•°æ›¿æ¢ä¸ºä¸Šä¸€ä¸ªæ­¥éª¤ä¸­å®é™…ä» demo-master-a-1 èŠ‚ç‚¹è·å¾—çš„å‚æ•°")])])]),a._v(" "),t("h3",{attrs:{id:"æ£€æŸ¥-apiserveråˆå§‹åŒ–ç»“æœ-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ£€æŸ¥-apiserveråˆå§‹åŒ–ç»“æœ-2","aria-hidden":"true"}},[a._v("#")]),a._v(" æ£€æŸ¥ apiserveråˆå§‹åŒ–ç»“æœ")]),a._v(" "),t("p",[a._v("åœ¨ç¬¬ä¸€ä¸ªmasterèŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl get nodes\n")])])]),t("p",[t("img",{attrs:{src:e(334),alt:"image-20190715193838012"}})]),a._v(" "),t("h2",{attrs:{id:"ç§»é™¤-worker-èŠ‚ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç§»é™¤-worker-èŠ‚ç‚¹","aria-hidden":"true"}},[a._v("#")]),a._v(" ç§»é™¤ worker èŠ‚ç‚¹")]),a._v(" "),t("div",{staticClass:"warning custom-block"},[t("p",[a._v("æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‚¨æ— éœ€ç§»é™¤ worker èŠ‚ç‚¹")])]),a._v(" "),t("p",[a._v("åœ¨å‡†å¤‡ç§»é™¤çš„ worker èŠ‚ç‚¹ä¸Šæ‰§è¡Œ")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubeadm reset\n")])])]),t("p",[a._v("åœ¨ç¬¬ä¸€ä¸ª master èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl delete node demo-worker-x-x\n")])])]),t("div",{staticClass:"tip custom-block"},[t("ul",[t("li",[a._v("å°† demo-worker-x-x æ›¿æ¢ä¸ºè¦ç§»é™¤çš„ worker èŠ‚ç‚¹çš„åå­—")]),a._v(" "),t("li",[a._v("worker èŠ‚ç‚¹çš„åå­—å¯ä»¥é€šè¿‡åœ¨èŠ‚ç‚¹ demo-master-a-1 ä¸Šæ‰§è¡Œ kubectl get nodes å‘½ä»¤è·å¾—")])])]),a._v(" "),t("h2",{attrs:{id:"å®‰è£…-ingress-controller"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…-ingress-controller","aria-hidden":"true"}},[a._v("#")]),a._v(" å®‰è£… Ingress Controller")]),a._v(" "),t("blockquote",[t("p",[a._v("Ingresså®˜æ–¹æ–‡æ¡£ï¼šhttps://kubernetes.io/docs/concepts/services-networking/ingress/")]),a._v(" "),t("p",[a._v("Ingress Controllerså®˜ç½‘ä»‹ç»ï¼šhttps://kubernetes.io/docs/concepts/services-networking/ingress-controllers/")]),a._v(" "),t("p",[a._v("æœ¬æ–‡ä¸­ä½¿ç”¨å¦‚ä¸‹éƒ¨ç½²æ–¹å¼ï¼šhttps://kubernetes.github.io/ingress-nginx/deploy/baremetal/#using-a-self-provisioned-edge")]),a._v(" "),t("p",[a._v("kubernetesæ”¯æŒå¤šç§Ingress Controllersï¼Œæœ¬æ–‡æ¨èä½¿ç”¨ https://github.com/nginxinc/kubernetes-ingress")])]),a._v(" "),t("h3",{attrs:{id:"åœ¨-demo-master-a-1-ä¸Šæ‰§è¡Œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨-demo-master-a-1-ä¸Šæ‰§è¡Œ","aria-hidden":"true"}},[a._v("#")]),a._v(" åœ¨ demo-master-a-1 ä¸Šæ‰§è¡Œ")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl apply -f https://raw.githubusercontent.com/eip-work/eip-monitor-repository/master/dashboard/nginx-ingress.yaml\n")])])]),t("h3",{attrs:{id:"é…ç½®åŸŸåè§£æ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®åŸŸåè§£æ","aria-hidden":"true"}},[a._v("#")]),a._v(" é…ç½®åŸŸåè§£æ")]),a._v(" "),t("p",[a._v("å°†åŸŸå *.demo.yourdomain.com è§£æåˆ°åœ°å€è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ çš„ IP åœ°å€ z.z.z.z")]),a._v(" "),t("h3",{attrs:{id:"éªŒè¯é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#éªŒè¯é…ç½®","aria-hidden":"true"}},[a._v("#")]),a._v(" éªŒè¯é…ç½®")]),a._v(" "),t("p",[a._v("åœ¨æµè§ˆå™¨è®¿é—® a.demo.yourdomain.comï¼Œå°†å¾—åˆ° 404 NotFound é”™è¯¯é¡µé¢")]),a._v(" "),t("h2",{attrs:{id:"ä¸‹ä¸€æ­¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‹ä¸€æ­¥","aria-hidden":"true"}},[a._v("#")]),a._v(" ä¸‹ä¸€æ­¥")]),a._v(" "),t("p",[a._v("ğŸ‰ ğŸ‰")]),a._v(" "),t("p",[a._v("æ‚¨å·²ç»å®Œæˆäº† Kubernetes é›†ç¾¤çš„å®‰è£…ï¼Œä¸‹ä¸€æ­¥è¯·ï¼š")]),a._v(" "),t("p",[t("a",{attrs:{href:"/install/install-dashboard"}},[a._v("å®‰è£… Kuboard")])])])},[],!1,null,null,null);s.default=r.exports}}]);